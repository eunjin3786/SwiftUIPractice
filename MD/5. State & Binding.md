# State & Binding

## 1. State

ì´ ì½”ë“œëŠ” ì»´íŒŒì¼ ì—ëŸ¬ê°€ ë‚©ë‹ˆë‹¤.

```swift
struct ContentView: View {
    var buttonState = false
    
    var body: some View {
        Button(action: {
            self.buttonState.toggle()
        }, label: {
            Text("ë²„íŠ¼")
        })
    }
}
```



í•˜ì§€ë§Œ `buttonState` ì—  `@State` ë¥¼ ë¶™ì´ë©´ ì»´íŒŒì¼ ì—ëŸ¬ê°€ ì‚¬ë¼ì§‘ë‹ˆë‹¤.

```swift
struct ContentView: View {
    @State var buttonState = false
    
    var body: some View {
        Button(action: {
            self.buttonState.toggle()
        }, label: {
            Text("ë²„íŠ¼")
        })
    }
}
```



ê·¸ëŸ¼ Stateë€ ë¬´ì—‡ì¼ê¹Œìš”?!

ê°„ë‹¨íˆ ë§í•˜ìë©´ SwiftUIëŠ” 

**Stateê°€ ë°”ë€Œë©´ Viewë¥¼ ìë™ìœ¼ë¡œ ì—…ë°ì´íŠ¸ í•©ë‹ˆë‹¤. (ì¦‰ bodyë¥¼ ì „ë¶€ ë‹¤ì‹œ ê·¸ë¦½ë‹ˆë‹¤.)**





ì•„ë˜ ì˜ˆì œë¥¼ ë³´ê² ìŠµë‹ˆë‹¤.

ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ nameì´ë¼ëŠ” stateë¥¼ ë°”ê¿”ì¤ë‹ˆë‹¤.

stateì˜ ë³€í™”ê°€ ìˆì„ ë•Œë§ˆë‹¤ bodyê°€ ë‹¤ì‹œ ê·¸ë ¤ì§€ê²Œ ë©ë‹ˆë‹¤.

```swift
struct ContentView: View {
    @State var name = ""
    
    var body: some View {
        VStack(spacing: 50) {
            Text(name)
                .font(.largeTitle)
                .fontWeight(.bold)
            
            VStack(spacing: 20) {
                Button(action: {
                    self.name = "ìœŒë¦¬ì—„"
                }, label: {
                    Text("ìœŒë¦¬ì—„ìœ¼ë¡œ ì´ë¦„ ë°”ê¾¸ëŠ” ë²„íŠ¼")
                })
                
                Button(action: {
                    self.name = "ë²¤í‹€ë¦¬"
                }, label: {
                    Text("ë²¤í‹€ë¦¬ë¡œ ì´ë¦„ ë°”ê¾¸ëŠ” ë²„íŠ¼")
                })
            }
        }
    }
}
```



![3xj4ga](https://user-images.githubusercontent.com/9502063/79884705-71288900-8430-11ea-95c6-fe28537cb70d.gif)











ê¸°ì¡´ì— ì˜ˆì œë¡œ ë§Œë“¤ì—ˆë˜ Listì½”ë“œì—ë„ `@State` ë¥¼ ì¶”ê°€í•´ë³´ê² ìŠµë‹ˆë‹¤.

```swift
struct ContentView: View {
    @State var friends: [Friend] = [Friend(name: "ìœŒë¦¬ì—„", profileImageName: "baby"),
                                    Friend(name: "ìœŒë¦¬ì—„", profileImageName: "baby"),
                                    Friend(name: "ìœŒë¦¬ì—„", profileImageName: "baby")]

    var body: some View {
        NavigationView {
            List(friends) { friend in
                NavigationLink(destination: FriendDetailGridView(friend: friend)) {
                    FriendCell(friend: friend)
                }
            }
            .navigationBarTitle("ë¦¬ìŠ¤íŠ¸")
            .navigationBarItems(leading: navigationLeftBarItem,
                                trailing: navigationRightBarItem)
        }
    }
    
    var navigationLeftBarItem: some View {
        Button(action: {
            self.friends.removeLast()
        }) {
            Text("-").font(.largeTitle)
        }
    }
    
    var navigationRightBarItem: some View {
        Button(action: {
            let friend = Friend(name: "ìœŒë¦¬ì—„", profileImageName: "baby")
            self.friends.append(friend)
        }) {
            Text("+").font(.largeTitle)
        }
    }
}
```



`@State` ë¥¼ ë¶™ì¸ ë³€ìˆ˜ê°€ ì—…ë°ì´íŠ¸ë˜ë©´ ë·°ê°€ ìë™ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤ ğŸ‘



![3xjdjg](https://user-images.githubusercontent.com/9502063/79888586-df247e80-8437-11ea-9461-8518f992a5a7.gif)



## 2. Binding

ë‘ê°€ì§€ ë°©í–¥ì˜ ë°”ì¸ë”©ì´ ìˆìŠµë‹ˆë‹¤.

- View to ViewModel

- ViewModel to View

  

#### 2.1 View to ViewModel



<img width="674" alt="ìŠ¤í¬ë¦°ìƒ· 2020-04-29 ì˜¤í›„ 1 29 40" src="https://user-images.githubusercontent.com/9502063/80560869-7b90e700-8a1d-11ea-9eb0-78dacfb7f609.png">



Viewì˜ í…ìŠ¤íŠ¸í•„ë“œì— nameê³¼ ageë¥¼ ì…ë ¥í•˜ë©´ ViewModelì˜ nameê³¼ age í”„ë¡œí¼í‹°ê°€ ì—…ë°ì´íŠ¸ ë©ë‹ˆë‹¤.



#### 2.2 ViewModel to View



<img width="697" alt="ìŠ¤í¬ë¦°ìƒ· 2020-04-29 ì˜¤í›„ 1 30 56" src="https://user-images.githubusercontent.com/9502063/80560925-aa0ec200-8a1d-11ea-8831-62ed8885c910.png">



ViewModelì˜ nameê³¼ age í”„ë¡œí¼í‹°ê°€ ì—…ë°ì´íŠ¸ë˜ë©´ ë·°ì˜ í…ìŠ¤íŠ¸í•„ë“œì˜ í…ìŠ¤íŠ¸ê°€ ì—…ë°ì´íŠ¸ ë©ë‹ˆë‹¤. 



#### 2.3 ì˜ˆì œ - TextField

`TextField` ë¥¼ ë³´ê² ìŠµë‹ˆë‹¤.

`TextField`ì˜ ì´ë‹ˆì…œë¼ì´ì €ëŠ” ì´ë ‡ê²Œ ìƒê²¼ëŠ”ë°ìš”, 

```swift
init<S>(_ title: S, text: Binding<String>, onEditingChanged: @escaping (Bool) -> Void = { _ in }, onCommit: @escaping () -> Void = {}) where S : StringProtocol
```



ì¼ë‹¨ titleì— placeholderë¥¼ ë„£ì–´ì£¼ë©´ ë©ë‹ˆë‹¤.

ê·¸ë¦¬ê³  textëŠ” `Binding<String>` íƒ€ì…ì¸ ê²ƒì„ ìœ ì˜í•´ì£¼ì„¸ìš”-!



textì˜ íƒ€ì…ì— ë§ê²Œ state í”„ë¡œí¼í‹°ì— ë‹¬ëŸ¬($)ë¥¼ ë¶™ì—¬ì„œ ë„£ì–´ì¤¬ìŠµë‹ˆë‹¤.



```swift
struct ContentView: View {
    @State private var name: String = ""
    var body: some View {
        VStack {
            TextField("Enter your name", text: $name)
            Spacer().frame(height: 30)
            Text(name)
        }
    }
}
```



ìœ„ì˜ ì˜ˆì œëŠ” two-way bindingì´ë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- TextFieldì— textê°€ ì…ë ¥ë ë•Œë§ˆë‹¤ nameë³€ìˆ˜ë¥¼ ì—…ë°ì´íŠ¸ ì‹œí‚µë‹ˆë‹¤
- nameë³€ìˆ˜ê°€ ì—…ë°ì´íŠ¸ ë ë•Œë§ˆë‹¤ ë·°ê°€ ë‹¤ì‹œ ê·¸ë ¤ì§‘ë‹ˆë‹¤.



#### 2.4 ì˜ˆì œ - Toggle

```swift
struct ContentView: View {
    @State private var showGreeting = true

    var body: some View {
        VStack {
            Toggle(isOn: $showGreeting) {
                Text("Show welcome message")
            }.padding()

            if showGreeting {
                Text("Hello World!")
            }
        }
    }
}

// https://www.hackingwithswift.com/quick-start/swiftui/how-to-create-a-toggle-switch
```



Toggleì˜ ì´ë‹ˆì…œë¼ì´ì €ëŠ” ì´ë ‡ê²Œ ìƒê²¼ìŠµë‹ˆë‹¤.

```swift
init(isOn: Binding<Bool>, @ViewBuilder label: () -> Label)
```

ê·¸ë˜ì„œ state propertyì— $ë¥¼ ë¶™ì—¬ì„œ ë„£ì–´ì¤¬ìŠµë‹ˆë‹¤.



`Toggle` ë„ two-way bindingì´ë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- toggleì„ on/offë¡œ ë°”ê¿€ ë•Œë§ˆë‹¤ showGreetingë³€ìˆ˜ë¥¼ ì—…ë°ì´íŠ¸ ì‹œí‚µë‹ˆë‹¤.
- showGreetingë³€ìˆ˜ê°€ ì—…ë°ì´íŠ¸ë ë•Œë§ˆë‹¤ ë·°ê°€ ë‹¤ì‹œ ê·¸ë ¤ì§‘ë‹ˆë‹¤.





#### 2.5 ì˜ˆì œ - Custom View

ìœ„ì˜ ì˜ˆì œì—ì„œ Binding<> íƒ€ì…ì„ í†µí•´ two-way bindingì„ í•œ ê²ƒ ì²˜ëŸ¼

custom viewë¥¼ ë§Œë“¤ë•Œë„ ì£¼ì…ë°›ì•„ì•¼í•˜ëŠ” í”„ë¡œí¼í‹°ì— @Bindingì„ ë¶™ì´ë©´ ë™ì¼í•œ íš¨ê³¼(?)ë¥¼ ê¸°ëŒ€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.



ì´ë ‡ê²Œ custom viewë¥¼ ë§Œë“¤ë©´,

```swift
struct PlayView: View {
    @Binding var isPlay: Bool
    
    var body: some View {
        Button(action: {
            self.isPlay.toggle()
        }) {
            Text(isPlay ? "â¹" : "â–¶ï¸")
                .font(.largeTitle)
        }
    }
}
```



ì‚¬ìš©í•˜ëŠ” ìª½ì—ì„œ ë°”ì¸ë”© íƒ€ì…ì˜ í”„ë¡œí¼í‹°ë¥¼ ë„£ì–´ì£¼ê²Œ ë˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.



<img width="497" alt="ìŠ¤í¬ë¦°ìƒ· 2020-04-29 ì˜¤í›„ 2 57 29" src="https://user-images.githubusercontent.com/9502063/80564782-c0bb1600-8a29-11ea-8594-b111377474df.png">





ì „ì²´ ì½”ë“œë¥¼ ë³´ê² ìŠµë‹ˆë‹¤.

```swift
struct ContentView: View {
    @State private var isPlay = false
    
    var body: some View {
        VStack {
            Text("ë…¸ë˜ì œëª©")
                .font(.largeTitle)
                .foregroundColor(isPlay ? .green : .gray)
            
            Spacer()
                .frame(height: 20)
            
            Text("ê°€ìˆ˜ì´ë¦„")
                .font(.title)
                .foregroundColor(isPlay ? .green : .gray)
            
            Spacer()
                .frame(height: 20)
            
            PlayView(isPlay: $isPlay)
        }
    }
}

struct PlayView: View {
    @Binding var isPlay: Bool
    
    var body: some View {
        Button(action: {
            self.isPlay.toggle()
        }) {
            Text(isPlay ? "â¹" : "â–¶ï¸")
                .font(.largeTitle)
        }
    }
}
```



1) `PlayView`ë¥¼ ë§Œë“¤ë•Œ,  `$isPlay` ë¥¼ ë„˜ê²¨ì¤¬ìŠµë‹ˆë‹¤.

2) `PlayView` ì˜ ë²„íŠ¼ì´ í´ë¦­ë ë•Œë§ˆë‹¤ `isPlay` ê°’ì„ ì—…ë°ì´íŠ¸ ì‹œí‚µë‹ˆë‹¤.

3) `isPlay` ê°’ì˜ ì—…ë°ì´íŠ¸ë ë•Œë§ˆë‹¤  `ContentView` ê°€ ë‹¤ì‹œ ê·¸ë ¤ì§‘ë‹ˆë‹¤.



![3yp6uy](https://user-images.githubusercontent.com/9502063/80565031-6bcbcf80-8a2a-11ea-94d7-d179117a8ba6.gif)